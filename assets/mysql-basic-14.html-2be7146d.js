import{_ as s,Z as n,$ as a,a5 as e}from"./framework-1fb77053.js";const p={},t=e(`<h2 id="_1-函数和存储过程的区别" tabindex="-1"><a class="header-anchor" href="#_1-函数和存储过程的区别" aria-hidden="true">#</a> 1. 函数和存储过程的区别</h2><p>函数和存储过程的定义一样，但有如下区别：</p><p>（1）存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新（增删改）</p><p>（2）函数：有且仅有1个返回，适合做处理数据后返回一个结果（查询）</p><h2 id="_2-函数的创建和调用" tabindex="-1"><a class="header-anchor" href="#_2-函数的创建和调用" aria-hidden="true">#</a> 2. 函数的创建和调用</h2><h3 id="_2-1-创建语法" tabindex="-1"><a class="header-anchor" href="#_2-1-创建语法" aria-hidden="true">#</a> 2.1 创建语法</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> 返回类型
<span class="token keyword">BEGIN</span>
    函数体
<span class="token keyword">END</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：</strong></p><p>（1）参数列表包含两部分：参数名、参数类型</p><p>（2）函数体中肯定会有 RETURN 语句，如果没有会报错，如果 RETURN 语句没有放在函数体的最后不会报错，但不建议</p><p>（3）函数体中仅有一句话，可以省略 BEGIN END</p><p>（4）使用 DELIMITER 语句设置结束标记</p><h3 id="_2-2-调用语法" tabindex="-1"><a class="header-anchor" href="#_2-2-调用语法" aria-hidden="true">#</a> 2.2 调用语法</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-3-案例演示" tabindex="-1"><a class="header-anchor" href="#_2-3-案例演示" aria-hidden="true">#</a> 2.3 案例演示</h3><p><strong>（1）无参有返回</strong></p><p>案例：返回公司的员工个数</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf1<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">INT</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">DECLARE</span> count <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment"># 声明局部变量</span>
	<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> count<span class="token comment"># 为变量赋值</span>
	<span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> count<span class="token punctuation">;</span><span class="token comment"># 返回结果</span>
<span class="token keyword">END</span> $
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pet-hkw.oss-cn-shenzhen.aliyuncs.com/image/new_blog_system/mysql/image-20210911090703288.png" alt="image-20210911090703288" tabindex="0" loading="lazy"><figcaption>image-20210911090703288</figcaption></figure><p><strong>（2）有参有返回</strong></p><p>案例1：根据员工名，返回他的工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf2<span class="token punctuation">(</span>empName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">DOUBLE</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">SET</span> <span class="token variable">@sal</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment"># 定义用户变量</span>
	<span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> <span class="token variable">@sal</span><span class="token comment"># 为变量赋值</span>
	<span class="token keyword">FROM</span> employees
	<span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> empName<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> <span class="token variable">@sal</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> $
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pet-hkw.oss-cn-shenzhen.aliyuncs.com/image/new_blog_system/mysql/image-20210911090752494.png" alt="image-20210911090752494" tabindex="0" loading="lazy"><figcaption>image-20210911090752494</figcaption></figure><p>案例2：根据部门名，返回该部门的平均工资</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf3<span class="token punctuation">(</span>deptName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">DOUBLE</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">DECLARE</span> avgSal <span class="token keyword">DOUBLE</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">INTO</span> avgSal
	<span class="token keyword">FROM</span> employees <span class="token keyword">AS</span> emp <span class="token keyword">JOIN</span> departments <span class="token keyword">AS</span> dept
	<span class="token keyword">ON</span> emp<span class="token punctuation">.</span>department_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>department_id
	<span class="token keyword">WHERE</span> dept<span class="token punctuation">.</span>department_name <span class="token operator">=</span> deptName<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> avgSal<span class="token punctuation">;</span>
<span class="token keyword">END</span> $
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pet-hkw.oss-cn-shenzhen.aliyuncs.com/image/new_blog_system/mysql/image-20210911090825668.png" alt="image-20210911090825668" tabindex="0" loading="lazy"><figcaption>image-20210911090825668</figcaption></figure><h2 id="_3-查看函数" tabindex="-1"><a class="header-anchor" href="#_3-查看函数" aria-hidden="true">#</a> 3. 查看函数</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_4-删除函数" tabindex="-1"><a class="header-anchor" href="#_4-删除函数" aria-hidden="true">#</a> 4. 删除函数</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,30),l=[t];function o(c,i){return n(),a("div",null,l)}const r=s(p,[["render",o],["__file","mysql-basic-14.html.vue"]]);export{r as default};
